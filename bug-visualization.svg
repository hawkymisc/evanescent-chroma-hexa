<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .hex { fill: none; stroke: #333; stroke-width: 1; }
      .hex-current { fill: rgba(255, 107, 107, 0.5); }
      .hex-adjacent { fill: rgba(78, 205, 196, 0.5); }
      .gap-highlight { fill: red; opacity: 0.7; }
      .vertex { fill: black; }
      .label { font-family: Arial; font-size: 12px; }
      .gap-label { font-family: Arial; font-size: 14px; fill: red; font-weight: bold; }
    </style>
  </defs>

  <!-- タイトル -->
  <text x="400" y="30" text-anchor="middle" class="label" style="font-size: 18px; font-weight: bold;">
    六角形配置のバグ: 0.62px の隙間
  </text>

  <g transform="translate(100, 80)">
    <!-- 水平隣接のケース -->
    <text x="150" y="-10" text-anchor="middle" class="label" style="font-weight: bold;">
      ケース1: 水平隣接 (0,0) と (1,0)
    </text>

    <!-- 六角形 (0,0) -->
    <polygon points="30.00,0.00 60.00,17.50 60.00,52.50 30.00,70.00 0.00,52.50 0.00,17.50" class="hex hex-current" />
    <text x="30" y="38" text-anchor="middle" class="label">(0,0)</text>

    <!-- 六角形 (1,0) -->
    <polygon points="90.62,0.00 120.62,17.50 120.62,52.50 90.62,70.00 60.62,52.50 60.62,17.50" class="hex hex-adjacent" />
    <text x="90.6217782649107" y="38" text-anchor="middle" class="label">(1,0)</text>

    <!-- 隙間を強調 -->
    <rect x="60" y="17.5"
          width="0.62"
          height="35"
          class="gap-highlight" />

    <!-- 隙間のラベル -->
    <text x="60.31088913245535" y="35"
          text-anchor="middle" class="gap-label">
      0.62px
    </text>

    <!-- 右辺と左辺を強調 -->
    <line x1="60" y1="17.5"
          x2="60" y2="52.5"
          stroke="red" stroke-width="3" />
    <line x1="60.6217782649107" y1="17.5"
          x2="60.6217782649107" y2="52.5"
          stroke="blue" stroke-width="3" />

    <!-- 寸法線 -->
    <line x1="60" y1="-10"
          x2="60.6217782649107" y2="-10"
          stroke="black" stroke-width="1" marker-end="url(#arrowhead)" />
    <line x1="60" y1="-15"
          x2="60" y2="-5"
          stroke="black" stroke-width="1" />
    <line x1="60.6217782649107" y1="-15"
          x2="60.6217782649107" y2="-5"
          stroke="black" stroke-width="1" />

    <!-- 斜め隣接のケース -->
    <g transform="translate(350, 0)">
      <text x="150" y="-10" text-anchor="middle" class="label" style="font-weight: bold;">
        ケース2: 斜め隣接 (0,0) と (0,1)
      </text>

      <!-- 六角形 (0,0) -->
      <polygon points="30.00,0.00 60.00,17.50 60.00,52.50 30.00,70.00 0.00,52.50 0.00,17.50" class="hex hex-current" />
      <text x="30" y="38" text-anchor="middle" class="label">(0,0)</text>

      <!-- 六角形 (0,1) -->
      <polygon points="60.31,52.50 90.31,70.00 90.31,105.00 60.31,122.50 30.31,105.00 30.31,70.00" class="hex hex-adjacent" />
      <text x="60.31088913245535" y="90.5" text-anchor="middle" class="label">(0,1)</text>

      <!-- 頂点を強調 -->
      <circle cx="30" cy="70" r="3" class="vertex" />
      <circle cx="60" cy="52.5" r="3" class="vertex" />
      <circle cx="60.31088913245535" cy="52.5" r="3" class="vertex" />
      <circle cx="30.31088913245535" cy="70" r="3" class="vertex" />

      <!-- 頂点間の距離を示す線 -->
      <line x1="30" y1="70"
            x2="60.31088913245535" y2="52.5"
            stroke="red" stroke-width="2" stroke-dasharray="5,5" />
      <text x="40.15544456622767"
            y="61.25"
            class="gap-label" style="font-size: 12px;">
        35.00px
      </text>

      <line x1="60" y1="52.5"
            x2="30.31088913245535" y2="70"
            stroke="blue" stroke-width="2" stroke-dasharray="5,5" />
      <text x="55.15544456622767"
            y="61.25"
            class="gap-label" style="font-size: 12px;">
        34.46px
      </text>
    </g>
  </g>

  <!-- 説明 -->
  <g transform="translate(50, 350)">
    <text x="0" y="0" class="label" style="font-weight: bold;">バグの原因:</text>
    <text x="0" y="20" class="label">• CSS width = 60px だが、理論的には √3 × 35 ≈ 60.62px であるべき</text>
    <text x="0" y="40" class="label">• 配置計算は正しく 60.62px の間隔を使用しているため、0.62px の隙間が生じる</text>
  </g>
</svg>